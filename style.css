*{ margin:0; padding:0; box-sizing:border-box; font-family: system-ui, Arial; }

:root{
  --bg1:#0b0f1f;
  --bg2:#101a3a;
  --pink:#ff5aa5;
  --blue:#53d0ff;
  --gold:#ffd36b;
  --white:#f8f8ff;
}

body{
  min-height:100vh;
  color:var(--white);
  overflow:hidden;
}

.bg{
  position:fixed; inset:0;
  background:
    radial-gradient(circle at 20% 20%, rgba(83,208,255,.25), transparent 40%),
    radial-gradient(circle at 80% 30%, rgba(255,90,165,.25), transparent 45%),
    linear-gradient(135deg, var(--bg1), var(--bg2));
}

.glow{
  position:fixed; inset:-40%;
  background: radial-gradient(circle, rgba(255,211,107,.12), transparent 55%);
  filter: blur(40px);
  animation: glow 6s ease-in-out infinite;
}

@keyframes glow{
  0%,100%{ transform: translate(0,0) scale(1); }
  50%{ transform: translate(3%, -2%) scale(1.08); }
}

.app{
  position:relative;
  min-height:100vh;
  display:flex;
  flex-direction:column;
  align-items:center;
  justify-content:center;
  padding:24px;
  gap:18px;
}

.topbar{ text-align:center; }
.topbar h1{ font-size: clamp(26px, 4vw, 50px); }
.name{ color: var(--gold); text-shadow: 0 0 16px rgba(255,211,107,.4); }
.sub{ opacity:.85; margin-top:8px; }

.stage{
  width:min(900px, 95vw);
  display:flex;
  flex-direction:column;
  align-items:center;
  gap:18px;
}

.cake-wrap{
  width: min(520px, 90vw);
  height: 420px;
  display:grid;
  place-items:center;
  perspective: 900px;
}

.cake{
  position:relative;
  width: 340px;
  height: 320px;
  transform: rotateX(18deg);
  transform-style: preserve-3d;
  animation: gentle 3.5s ease-in-out infinite;
}

@keyframes gentle{
  0%,100%{ transform: rotateX(18deg) translateY(0px); }
  50%{ transform: rotateX(18deg) translateY(-6px); }
}

.plate{
  position:absolute;
  bottom: 0;
  left:50%;
  transform: translateX(-50%) translateZ(-20px);
  width: 380px;
  height: 70px;
  border-radius: 999px;
  background: linear-gradient(180deg, rgba(255,255,255,.18), rgba(255,255,255,.06));
  box-shadow: 0 30px 80px rgba(0,0,0,.55);
}

.layer{
  position:absolute;
  left:50%;
  transform: translateX(-50%);
  width: 320px;
  border-radius: 22px;
  box-shadow: inset 0 0 0 2px rgba(255,255,255,.06);
}

.layer-1{
  height: 110px;
  bottom: 40px;
  background: linear-gradient(180deg, rgba(255,90,165,.22), rgba(255,90,165,.08));
}
.layer-2{
  height: 95px;
  bottom: 130px;
  width: 285px;
  background: linear-gradient(180deg, rgba(83,208,255,.22), rgba(83,208,255,.08));
}
.layer-3{
  height: 85px;
  bottom: 205px;
  width: 250px;
  background: linear-gradient(180deg, rgba(255,211,107,.25), rgba(255,211,107,.08));
}

.icing{ position:absolute; inset:0; border-radius: inherit; }

.icing.drip::before{
  content:"";
  position:absolute;
  top:0; left:0; right:0;
  height: 26px;
  border-radius: 22px 22px 14px 14px;
  background: rgba(255,255,255,.14);
}
.icing.drip::after{
  content:"";
  position:absolute;
  top: 16px; left: 14px; right: 14px;
  height: 26px;
  background:
    radial-gradient(circle at 10% 0%, rgba(255,255,255,.18) 0 30%, transparent 32%),
    radial-gradient(circle at 35% 0%, rgba(255,255,255,.16) 0 30%, transparent 32%),
    radial-gradient(circle at 65% 0%, rgba(255,255,255,.16) 0 30%, transparent 32%),
    radial-gradient(circle at 90% 0%, rgba(255,255,255,.18) 0 30%, transparent 32%);
  opacity:.85;
}

.icing.top{
  background: radial-gradient(circle at 30% 30%, rgba(255,255,255,.18), transparent 55%),
              radial-gradient(circle at 70% 30%, rgba(255,255,255,.14), transparent 55%);
}

.cake-name{
  position:absolute;
  left:50%;
  bottom: 175px;
  transform: translateX(-50%) translateZ(55px);
  font-weight: 900;
  letter-spacing: 4px;
  font-size: 22px;
  color: rgba(255,255,255,.92);
  text-shadow: 0 0 18px rgba(255,90,165,.35);
}

.candles{
  position:absolute;
  left:50%;
  bottom: 265px;
  transform: translateX(-50%) translateZ(40px);
  display:flex;
  gap: 18px;
}

.candle{
  position:relative;
  width: 18px;
  height: 64px;
  border-radius: 10px;
  background: linear-gradient(180deg, rgba(255,255,255,.75), rgba(255,255,255,.15));
  box-shadow: 0 12px 25px rgba(0,0,0,.35);
}
.candle::before{
  content:"";
  position:absolute;
  inset:0;
  background: repeating-linear-gradient(
    45deg,
    rgba(255,90,165,.55) 0 6px,
    rgba(83,208,255,.55) 6px 12px
  );
  opacity:.65;
  border-radius: 10px;
}
.wick{
  position:absolute;
  top:-10px;
  left:50%;
  transform:translateX(-50%);
  width:3px;
  height:12px;
  background:#111;
  border-radius: 2px;
}
.flame{
  position:absolute;
  top:-44px;
  left:50%;
  transform: translateX(-50%);
  width: 18px;
  height: 30px;
  background: radial-gradient(circle at 40% 35%, #fff 0 20%, transparent 22%),
              radial-gradient(circle at 50% 55%, #ffd36b 0 40%, #ff7b00 65%, rgba(255,0,0,.0) 72%);
  border-radius: 50%;
  filter: drop-shadow(0 0 14px rgba(255,211,107,.55));
  animation: flicker .12s infinite alternate;
}
.flame.off{ opacity:0; transform: translateX(-50%) scale(.2); animation:none; }

@keyframes flicker{
  from{ transform: translateX(-50%) rotate(-2deg) scale(1); }
  to{ transform: translateX(-50%) rotate(2deg) scale(1.05); }
}

.controls{
  display:flex;
  gap:10px;
  flex-wrap:wrap;
  justify-content:center;
}

.btn{
  padding: 12px 16px;
  border-radius: 14px;
  border: 1px solid rgba(255,255,255,.16);
  background: rgba(255,255,255,.06);
  color: var(--white);
  cursor:pointer;
  transition: .2s;
  backdrop-filter: blur(8px);
}
.btn:hover{ transform: translateY(-2px); border-color: rgba(255,255,255,.25); }
.btn.primary{
  background: linear-gradient(135deg, rgba(255,90,165,.35), rgba(83,208,255,.25));
  border-color: rgba(255,255,255,.22);
}

.meter{
  width:min(520px, 92vw);
  background: rgba(0,0,0,.22);
  border:1px solid rgba(255,255,255,.14);
  border-radius: 16px;
  padding: 14px;
  backdrop-filter: blur(10px);
}
.meter-label{ font-weight:700; margin-bottom:10px; }
.meter-bar{
  width:100%;
  height: 14px;
  border-radius: 999px;
  background: rgba(255,255,255,.08);
  overflow:hidden;
}
.meter-fill{
  height:100%;
  width:0%;
  border-radius: 999px;
  background: linear-gradient(90deg, rgba(83,208,255,.95), rgba(255,90,165,.95), rgba(255,211,107,.95));
  transition: width .08s linear;
}
.meter-tip{ margin-top:10px; opacity:.75; font-size:13px; }

/* Modal */
.modal{
  position:fixed;
  inset:0;
  display:none;
  place-items:center;
  background: rgba(0,0,0,.55);
  backdrop-filter: blur(10px);
  z-index:50;
}
.modal.show{ display:grid; }

.modal-card{
  width: min(680px, 92vw);
  border-radius: 22px;
  border: 1px solid rgba(255,255,255,.18);
  background: rgba(12,16,35,.85);
  box-shadow: 0 40px 120px rgba(0,0,0,.6);
  overflow:hidden;
  animation: pop .25s ease;
}
@keyframes pop{
  from{ transform: scale(.96); opacity:.6; }
  to{ transform: scale(1); opacity:1; }
}
.modal-head{
  padding: 16px 18px;
  display:flex;
  justify-content:space-between;
  align-items:center;
  border-bottom: 1px solid rgba(255,255,255,.12);
}
.modal-body{ padding: 18px; line-height:1.6; font-size:16px; }
.close{ border:none; background:transparent; color:var(--white); font-size:18px; cursor:pointer; opacity:.85; }
.modal-actions{
  padding: 16px 18px;
  border-top: 1px solid rgba(255,255,255,.12);
  display:flex;
  justify-content:flex-end;
}

#confettiCanvas{
  position:fixed;
  inset:0;
  pointer-events:none;
  z-index:60;
}

/* Balloons */
.balloons{
  position:fixed;
  inset:0;
  pointer-events:none;
  z-index:0;
}
.balloon{
  position:absolute;
  bottom:-120px;
  width: 70px;
  height: 90px;
  border-radius: 50% 50% 45% 45%;
  filter: blur(.1px);
  opacity:.85;
  animation: float 10s linear infinite;
}
.balloon::after{
  content:"";
  position:absolute;
  left:50%;
  bottom:-55px;
  width:2px;
  height:55px;
  background: rgba(255,255,255,.22);
}

@keyframes float{
  from{ transform: translateY(0) rotate(-2deg); }
  to{ transform: translateY(-120vh) rotate(2deg); }
}

.b1{ left: 8%; animation-duration: 12s; background: rgba(255,90,165,.55); }
.b2{ left: 26%; animation-duration: 10s; background: rgba(83,208,255,.55); }
.b3{ left: 52%; animation-duration: 13s; background: rgba(255,211,107,.55); }
.b4{ left: 72%; animation-duration: 11s; background: rgba(170,120,255,.55); }
.b5{ left: 88%; animation-duration: 14s; background: rgba(120,255,190,.55); }
